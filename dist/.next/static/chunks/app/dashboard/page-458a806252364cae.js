(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{45639:function(e,i,n){Promise.resolve().then(n.bind(n,71720))},71720:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return a}});var t=n(57437),c=n(2265),s=n(9997),r=n(99376);function a(){var e,i,n,a;let l=(0,r.useRouter)(),u=(0,s.z)(),[d,o]=(0,c.useState)({}),[p,m]=(0,c.useState)([]),h=e=>o(i=>({...i,city:e})),x=e=>o(i=>({...i,cuisine:e})),b=e=>o(i=>({...i,discount_min:e})),v=e=>o(i=>({...i,price_max:e})),f=e=>o(i=>({...i,pickup:e})),y=e=>o(i=>({...i,delivery:e}));return(0,c.useEffect)(()=>{(async()=>{let e=u.from("offer_index").select("*").order("discount_percent",{ascending:!1});d.city&&(e=e.eq("city",d.city)),d.cuisine&&(e=e.eq("cuisine",d.cuisine)),d.discount_min&&(e=e.gte("discount_percent",d.discount_min)),d.price_max&&(e=e.lte("discounted_price",d.price_max)),void 0!==d.pickup&&(e=e.eq("pickup",d.pickup)),void 0!==d.delivery&&(e=e.eq("delivery",d.delivery));let{data:i,error:n}=await e;n||m(i||[])})()},[d,u]),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Dashboard"}),(0,t.jsxs)("div",{className:"grid gap-3 max-w-2xl mt-4",children:[(0,t.jsx)("input",{className:"input border rounded-xl px-3 py-2",placeholder:"City",value:null!==(e=d.city)&&void 0!==e?e:"",onChange:e=>h(e.target.value)}),(0,t.jsx)("input",{className:"input border rounded-xl px-3 py-2",placeholder:"Cuisine",value:null!==(i=d.cuisine)&&void 0!==i?i:"",onChange:e=>x(e.target.value)}),(0,t.jsx)("input",{className:"input border rounded-xl px-3 py-2",type:"number",placeholder:"Min. discount %",value:null!==(n=d.discount_min)&&void 0!==n?n:"",onChange:e=>b(Number(e.target.value)||0)}),(0,t.jsx)("input",{className:"input border rounded-xl px-3 py-2",type:"number",placeholder:"Max. price",value:null!==(a=d.price_max)&&void 0!==a?a:"",onChange:e=>v(Number(e.target.value)||0)}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!d.pickup,onChange:e=>f(e.target.checked)})," Pickup"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!d.delivery,onChange:e=>y(e.target.checked)})," Delivery"]})]}),(0,t.jsx)("ul",{className:"mt-6",children:p.map(e=>(0,t.jsx)("li",{className:"border rounded-xl p-3 mb-2",children:(0,t.jsxs)("a",{href:"/go/".concat(e.id),className:"link",children:[e.title," â€” ",e.city,e.discount_percent&&" (".concat(e.discount_percent.toFixed(0),"% off)")]})},e.id))}),(0,t.jsxs)("div",{className:"mt-6 grid gap-4",children:[(0,t.jsx)("button",{className:"btn",onClick:()=>l.push("/favorites"),children:"Favorites"}),(0,t.jsx)("button",{className:"btn",onClick:()=>l.push("/alerts"),children:"Alerts"}),(0,t.jsx)("form",{action:"/signout",method:"post",children:(0,t.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Sign Out"})})]})]})}},9997:function(e,i,n){"use strict";n.d(i,{z:function(){return c}});var t=n(21388);function c(){return(0,t.createBrowserClient)("https://wpkcawjvhnaykqjgcgye.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indwa2Nhd2p2aG5heWtxamdjZ3llIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMTYwNzMsImV4cCI6MjA3MzY5MjA3M30.qaXBidq7R3hTJHG9J0ObYoGIi4UWKuQqSe0r3tGtTlA")}},99376:function(e,i,n){"use strict";n.r(i);var t=n(35475),c={};for(var s in t)"default"!==s&&(c[s]=(function(e){return t[e]}).bind(0,s));n.d(i,c)}},function(e){e.O(0,[388,971,117,744],function(){return e(e.s=45639)}),_N_E=e.O()}]);